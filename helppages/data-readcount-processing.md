# Read count processing

You can apply additional processing to your read count table:

## Remove genes with constant read counts

If enabled, all genes with constant read counts are omitted from the table.
This is needed if you want to apply variance scaling to the data before PCA as
genes with constant read counts have a variance of zero.

## Transpose matrix

You can use this option if you provided a transposed table (where the genes are the columns
  and the samples are the rows).

## Read count normalization

If your read counts are not normalized, it is advised to apply normalization.
Currently, you can choose to apply *library size normalization* with the
DESeq2 package or apply *within sample normalization* with TPM.

**Note that you can only normalize integer read counts.**

### DESeq2 normalization

Currently the DESeq2 normalization tool supports normalization by a single sample condition
that is generated from the condition table (see `Data > Sample annotation` help page for more information).

The sample condition is generated by joining the condition names of a sample with a "^". If the condition
is not present in the sample, the condition name is replaced by an empty string.

For example following condition table

| Sample | Condition1 | Condition2 | Condition3 |
|--------|------------|------------|------------|
| S1     | TRUE       | TRUE       | FALSE      |
| S2     | FALSE      | TRUE       | TRUE       |

is collapsed into following condition:

| Sample | Collapsed condition    |
|--------|------------------------|
| S1     | Condition1^Condition2^ |
| S2     | ^Condition2^Condition3 |

DESeq2 will calculate its model based on this collapsed condition. Go to
`Navigation > Data > Read counts > Processed` and show the details of the processing
view (see `Appendix > Processing view widget` help page for more information)
to see the collapsed conditions.

### TPM normalization

TPM needs following information:

* The feature lengths or (recommended) the sum of the exon lengths *without overlap* of each gene
* The mean fragment length (optional, but recommended) of each sample

The feature length / exon length is provided by the gene annotation, while the
mean fragment length is provided by the sample annotation. See the respective help pages `Data > Gene annotation` and
`Data > Sample annotation` help page for more information.

<div class="well help-box">
<label>Info</label>  We chose to not include normalization via RPKM/FPKM. See <a href="http://www.rna-seqblog.com/rpkm-fpkm-and-tpm-clearly-explained/">here</a> and <a href="http://blog.nextgenetics.net/?e=51">here</a> for great articles that give a summary about read count normalization and the issues with RPKM/FPKM.
</div>
